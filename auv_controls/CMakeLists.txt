# Catkin User Guide: http://www.ros.org/doc/groovy/api/catkin/html/user_guide/user_guide.html
# Catkin CMake Standard: http://www.ros.org/doc/groovy/api/catkin/html/user_guide/standards.html
cmake_minimum_required(VERSION 2.8.3)
project(auv_controls)
# Load catkin and all dependencies required for this package
# TODO: remove all from COMPONENTS that are not catkin packages.
find_package(catkin REQUIRED COMPONENTS roscpp cpp11 uscauv_joystick dynamic_reconfigure
  uscauv_common seabee3_common auv_physics auv_msgs seabee3_msgs eigen_conversions
  message_generation std_msgs)

find_package(Eigen REQUIRED)

include_directories(include cfg/cpp ${Eigen_INCLUDE_DIR} ${catkin_INCLUDE_DIRS})

add_message_files(
  FILES
  FeedbackLoop.msg
  )

generate_messages(DEPENDENCIES std_msgs)


generate_dynamic_reconfigure_options(
  cfg/ControlServer.cfg
  cfg/PID.cfg
  )

catkin_package(
  DEPENDS 
  CATKIN_DEPENDS roscpp cpp11 uscauv_joystick uscauv_common seabee3_common 
  auv_physics auv_msgs seabee3_msgs eigen_conversions message_runtime std_msgs
  INCLUDE_DIRS include cfg/cpp
  LIBRARIES ${PROJECT_NAME}
  )

add_library(${PROJECT_NAME} src/pid.cpp src/controller.cpp)
add_dependencies(${PROJECT_NAME} ${PROJECT_NAME}_gencfg ${PROJECT_NAME}_generate_messages_cpp)
target_link_libraries(${PROJECT_NAME} ${catkin_LIBRARIES} ${Eigen_LIBRARIES})

# Auto-generated by uscauv-add-node
add_executable( control_server nodes/control_server_node.cpp )
target_link_libraries(control_server ${catkin_LIBRARIES} ${Eigen_LIBRARIES} ${PROJECT_NAME})

# Auto-generated by uscauv-add-node
add_executable( seabee3_adapter nodes/seabee3_adapter_node.cpp )
target_link_libraries(seabee3_adapter ${catkin_LIBRARIES} ${Eigen_LIBRARIES} ${PROJECT_NAME})

# Auto-generated by uscauv-add-node
add_executable( axis_command_test nodes/axis_command_test_node.cpp )
target_link_libraries(axis_command_test ${catkin_LIBRARIES} ${Eigen_LIBRARIES} ${PROJECT_NAME})

# Auto-generated by uscauv-add-node
add_executable( pose_command_test nodes/pose_command_test_node.cpp )
target_link_libraries(pose_command_test ${catkin_LIBRARIES} ${Eigen_LIBRARIES} ${PROJECT_NAME})

